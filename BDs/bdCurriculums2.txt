CREATE TABLE `planteles` (
  `id_plantel` int(11) NOT NULL AUTO_INCREMENT,
  `nombre_plantel` varchar(100) NOT NULL,
  PRIMARY KEY (`id_plantel`),
  UNIQUE KEY `nombre_plantel` (`nombre_plantel`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

CREATE TABLE `areas` (
  `id_area` int(11) NOT NULL AUTO_INCREMENT,
  `id_plantel` int(11) NOT NULL,
  `nombre_area` varchar(100) NOT NULL,
  PRIMARY KEY (`id_area`),
  KEY `id_plantel` (`id_plantel`),
  CONSTRAINT `areas_ibfk_1` FOREIGN KEY (`id_plantel`) REFERENCES `planteles` (`id_plantel`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

CREATE TABLE `subareas` (
  `id_subarea` int(11) NOT NULL AUTO_INCREMENT,
  `id_area` int(11) NOT NULL,
  `nombre_subarea` varchar(100) NOT NULL,
  `descripcion` VARCHAR(255) DEFAULT NULL,
  PRIMARY KEY (`id_subarea`),
  KEY `id_area` (`id_area`),
  CONSTRAINT `subareas_ibfk_1` FOREIGN KEY (`id_area`) REFERENCES `areas` (`id_area`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

CREATE TABLE `usuarios` (
  `id_usuario` int(11) NOT NULL AUTO_INCREMENT,
  `usuario` varchar(30) NOT NULL,
  `contrase単a` varchar(255) NOT NULL,
  `tipo_usuario` enum('administrador','moderador','empresa','empleado') NOT NULL,
  PRIMARY KEY (`id_usuario`),
  UNIQUE KEY `usuario` (`usuario`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

CREATE TABLE `moderadores` (
  `id_moderador` int(11) NOT NULL AUTO_INCREMENT,
  `id_usuario` int(11) NOT NULL,
  `id_plantel` int(11) NOT NULL,
  `nombre_completo` varchar(100) NOT NULL,
  `correo` varchar(100) NOT NULL,
  `numero` varchar(20) NOT NULL,
  PRIMARY KEY (`id_moderador`),
  UNIQUE KEY `id_usuario` (`id_usuario`),
  UNIQUE KEY `correo` (`correo`),
  KEY `id_plantel` (`id_plantel`),
  CONSTRAINT `moderadores_ibfk_1` FOREIGN KEY (`id_usuario`) REFERENCES `usuarios` (`id_usuario`),
  CONSTRAINT `moderadores_ibfk_2` FOREIGN KEY (`id_plantel`) REFERENCES `planteles` (`id_plantel`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

CREATE TABLE `empleados` (
  `id_empleado` int(11) NOT NULL AUTO_INCREMENT,
  `id_plantel` int(11) NOT NULL,
  `nombre_completo` varchar(100) NOT NULL,
  `celular` varchar(15) NOT NULL,
  `correo` varchar(100) NOT NULL,
  `estudios` enum('primaria','secundaria','preparatoria','universidad') NOT NULL,
  `edad` int(11) NOT NULL,
  `ruta_curriculum` varchar(255) DEFAULT NULL,
  `experiencia` enum('Sin experiencia','0-1 a単os de experiencia','1-5 a単os de experiencia','mas de 5 a単os de experiencia') NOT NULL,
  `area1` int(11) NOT NULL,
  `area2` int(11) DEFAULT NULL,
  `area3` int(11) DEFAULT NULL,
  `dispuesto` enum('si','no') NOT NULL DEFAULT 'no',
  `fecha_registro` DATE NOT NULL DEFAULT CURRENT_DATE,
  PRIMARY KEY (`id_empleado`),
  UNIQUE KEY `correo` (`correo`),
  KEY `id_plantel` (`id_plantel`),
  KEY `empleados_ibfk_3` (`area1`),
  KEY `empleados_ibfk_4` (`area2`),
  KEY `empleados_ibfk_5` (`area3`),
  CONSTRAINT `empleados_ibfk_2` FOREIGN KEY (`id_plantel`) REFERENCES `planteles` (`id_plantel`),
  CONSTRAINT `empleados_ibfk_3` FOREIGN KEY (`area1`) REFERENCES `subareas` (`id_subarea`),
  CONSTRAINT `empleados_ibfk_4` FOREIGN KEY (`area2`) REFERENCES `subareas` (`id_subarea`),
  CONSTRAINT `empleados_ibfk_5` FOREIGN KEY (`area3`) REFERENCES `subareas` (`id_subarea`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

